language: c
group: travis_latest
dist: xenial

git:
  depth: 3
  quiet: true

env: FC=gfortran

addons:
  apt:
    packages:
    - gfortran

matrix:
  include:
  - os: linux
    language: python
    python: 3.7
    before_install: pip install meson
    install:
    - cd build
    - meson ..
    - ninja
    script:
    - ninja test < $TRAVIS_BUILD_DIR/good.asc
  - os: osx
    before_install: 
    - brew update > /dev/null
    - brew install gcc > /dev/null
  - os: windows
    install: mingw32-make
    script: mingw32-make test

install: make

script: make test
